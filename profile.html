<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Profile</title>
    <link rel="stylesheet" href="css/profile.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</head>


<body>
    <div id="loader">
        <div class="center">
            <div class="one"></div>
        </div>
    </div>

    <div class="content">
        <div class="nav-bar">
            <a class="btn btn-light my-2 my-sm-0" role="button" id="sign_out">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z" />
                    <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z" />
                </svg>
            </a>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2 btn" id="search" type="search" placeholder="Search" aria-label="Search">
                <button class="btn my-2 my-sm-0" type="submit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                      </svg>
                </button>
                <!-- Dropdown menu -->
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <!-- Dropdown items will be rendered here -->
                <div id="user-list"></div>
                </div>
            </form>
            <div class="nav-item dropdown" id="hamburger-menu">
                <!--<a href="feed.html" class="btn btn-info my-2 my-sm-0" style="margin-right: -10px;" role="button" id="home">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-house-heart-fill" viewBox="0 0 16 16">
                        <path d="M7.293 1.5a1 1 0 0 1 1.414 0L11 3.793V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v3.293l2.354 2.353a.5.5 0 0 1-.708.707L8 2.207 1.354 8.853a.5.5 0 1 1-.708-.707z"/>
                        <path d="m14 9.293-6-6-6 6V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5zm-6-.811c1.664-1.673 5.825 1.254 0 5.018-5.825-3.764-1.664-6.691 0-5.018"/>
                    </svg>
                </a>    -->       
                <a class="btn btn-warning my-2 my-sm-0" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
                    </svg>
                </a>
                <div class="dropdown-menu subtitle" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="index.html #about-us">About Us</a>
                    <a class="dropdown-item" href="index.html #contact-us">Contact</a>
                    <a class="dropdown-item" href="settings.html">Settings</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="index.html">SIGN OUT</a>
                </div>
            </div>
        </div>
        
        <div class="profile-bg">
            <div class="img-bg">
                <div id="edit">
                    <a type="button" class="btn btn-light" href="settings.html">Edit</a>
                </div>
            </div>
        </div>

        <div class="pro-img">
            <div class="username">
                <img src="images/pro-img2.png" id="profile-img">
            </div>
            <div class="username" id="user">
                <p></p>
            </div>
        </div>

        <div class="dropdown new-goal">
            <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                + NEW GOAL
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" style="text-align: center" href="creategoal.html">Create a New Goal</a>
                <a class="dropdown-item" style="text-align: center" href="joingoal.html">Join an Existing Goal</a>
            </div>
        </div>

        <!--div to hold the user elements-->
        <div class="user-container"></div> 
        
        <div class="container">
            <div class="level-box bg-color">
                <p>LEVEL 0</p>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-trophy" viewBox="0 0 16 16">
                    <path d="M3 1.5A1.5 1.5 0 0 0 1.5 3v1a1.5 1.5 0 0 0 1 1.415V6a5.002 5.002 0 0 0 4 4.9V13H5.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1H9v-2.1a5.002 5.002 0 0 0 4-4.9V5.415A1.5 1.5 0 0 0 14.5 4V3A1.5 1.5 0 0 0 13 1.5h-2a1.5 1.5 0 0 0-3 0H6a1.5 1.5 0 0 0-3 0H3Zm1 0a.5.5 0 0 1 1 0h6a.5.5 0 0 1 1 0h.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3.5a.5.5 0 0 1-.5-.5V3a.5.5 0 0 1 .5-.5H4Zm9 3V6a4 4 0 0 1-8 0V4h8Z"/>
                </svg>
                <div class="progress-container">
                    <div class="progress-label "><small>Progress to </small>Level <span id="next-level">1</span></div>
                    <div class="progress-bar">
                        <div class="progress-bar-fill" id="progress-fill" style="width: 0;"></div>
                    </div>
                </div>
            </div>
            <div class="social-stats">
                <div class="followers">
                    <p id="follower-count">0</p> 
                    <h3>FOLLOWERS</h3>
                </div>
                <div class="following">
                    <p id="following-count">0</p>
                    <h3>FOLLOWING</h3>
                </div>
            </div>
            <div class="read-only-text">
                <input type="text" id="bio" value="this is my bio hehe hi <3" readonly>
            </div>
            <r>

            <div class="d-flex justify-content-center">
                <div class="spinner-border" role="status">
                  <span class="visually-hidden"></span>
                </div>
            </div>
    </div>
            <!-- <h2 class="headline">- UPCOMING -</h2>

            <div id="upcomingCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
            </div>   
            <div class="d-flex justify-content-center">
                <div class="spinner-border" role="status">
                  <span class="visually-hidden"></span>
                </div>
            </div>
            <br><hr><br> -->
    <!--ONGOING CARO-->
            <!-- <h2 class="headline">- ONGOING -</h2>
            <div id="ongoingCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
                
            </div>   
            <div class="d-flex justify-content-center">
                <div class="spinner-border" role="status">
                  <span class="visually-hidden"></span>
                </div>
            </div>

            <br><hr><br> -->
    <!--COMPLETED CARO-->
            <!-- <h2 class="headline">- COMPLETED -</h2>
            <div id="completedCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
        
            </div>
            <div class="d-flex justify-content-center">
                <div class="spinner-border" role="status">
                  <span class="visually-hidden"></span>
                </div>
            </div>
            <br><hr><br> -->
     <!--FAILED CARO-->
     <!-- <h2 class="headline">- FAILED -</h2>
     <div id="failedCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
 
     </div>
     <div class="d-flex justify-content-center">
        <div class="spinner-border" role="status">
          <span class="visually-hidden"></span>
        </div>
    </div> -->
    <!-- <div id="google_translate_element"></div> -->
    </div>

   <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="js/wow.min.js"></script>

    <script>
        jQuery(document).ready(function ($) {
            "use strict"
            $("#loader").delay(1000).fadeOut("slow");

            var wow = new WOW({
                boxClass: 'animate',
                animateClass: 'animated',
                offset: 90,
                mobile: false
            });
            wow.init();

        });
    </script>
    <script>

        document.addEventListener("DOMContentLoaded", function () {
            function updateCheckpointMargins() {
                var timelines = document.querySelectorAll('.mini-timeline'); // Select all mini-timeline elements
                timelines.forEach(function (container) { // Process each timeline individually
                    var checkpoints = container.querySelectorAll('.checkpoint');
                    var baseMargin = 75; // Base margin for 6 checkpoints
                    var numberOfCheckpoints = checkpoints.length;
                    var marginDifference = 6 - numberOfCheckpoints; // Difference from base number of checkpoints
                    var currentMargin = baseMargin + (marginDifference * 10);
    
                    checkpoints.forEach(function (checkpoint, index) {
                        // Apply equal margin on both sides for each checkpoint except the last
                        checkpoint.style.marginRight = index !== checkpoints.length - 1 ? currentMargin + 'px' : '0px';
                        checkpoint.style.marginLeft = currentMargin + 'px';
                    });
    
                    // Remove left margin of the first checkpoint to maintain center alignment
                    if (checkpoints.length > 0) {
                        checkpoints[0].style.marginLeft = '0px';
                    }
                });
            }
    
            updateCheckpointMargins();
            window.addEventListener('resize', updateCheckpointMargins); // Adjust margins on window resize
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
        await getUsers();
        // Redirect to user profile when clicking a user in the dropdown
        document.querySelectorAll(".dropdown-item span").forEach((item) => {
            item.addEventListener("click", () => {
            const userId = item.dataset.userId;
            window.location.href = `user_profile.html?user_id=${userId}`;
            });
        });
        });
    </script>
  

        <script src="js/profile.js"></script>
        <script src="./backend/updateGoals.js" type="module"></script>
        <script src ="./backend/getCheckpoints.js"></script>
        <script src="./backend/checkJoin.js" type="module"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
        <script src="./js/translate.js" type="module"></script>
        <script src="./backend/searchBar.js" type="module"></script>
        <script src="./backend/follow.js" type="module"></script>
    </body>
</html>

  <!--  -->